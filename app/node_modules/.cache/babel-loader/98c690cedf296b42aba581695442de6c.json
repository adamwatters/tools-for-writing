{"ast":null,"code":"import _toConsumableArray from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/adamwatters/tfw/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/adamwatters/tfw/src/pages/Onward.js\";\nimport React, { Component } from \"react\";\nimport Tomato from \"../components/Tomato\";\nimport { mmddyyyy } from \"../utilities/datetime.ts\";\n\nvar BigPicture =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BigPicture, _Component);\n\n  function BigPicture() {\n    var _this;\n\n    _classCallCheck(this, BigPicture);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BigPicture).call(this));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(BigPicture, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var committed = this.props.committed || []; // console.log(\"committed\", committed);\n\n      var paragraphs = committed.find(function (e) {\n        return e === \"<NEWPARAGRAPH>\";\n      }) ? committed : // initialize accumulator with a zero because the first paragraph should be sliced from 0\n      committed.reduce(function (a, e, i) {\n        return e === \"<NEWPARAGRAPH>\" ? [].concat(_toConsumableArray(a), [i + 1]) : a;\n      }, []).map(function (newParagraphIndex, index, arrayOfIndexes) {\n        console.log(\"****\");\n        console.log(\"newParagraphIndex\", newParagraphIndex);\n        console.log(\"index\", index);\n        console.log(\"arrayOfIndexes\", arrayOfIndexes);\n        console.log(\"****\");\n\n        if (newParagraphIndex === arrayOfIndexes.length - 1) {\n          return committed.slice(newParagraphIndex);\n        } else {\n          return committed.slice(newParagraphIndex, arrayOfIndexes[index + 1]);\n        }\n      }).map(function (paragraphSubArray) {\n        return paragraphSubArray.filter(function (s) {\n          return s !== \"<NEWPARAGRAPH>\";\n        }).join(\" \").trim();\n      });\n      var blob = new Blob([paragraphs.join(\"\\n\")], {\n        type: \"text/plain;charset=utf-8\"\n      }); // console.log(\"paragraphs\", paragraphs);\n\n      var downloadUrl = URL.createObjectURL(blob);\n      return React.createElement(\"div\", {\n        onMouseEnter: function onMouseEnter() {\n          if (committed.length) {\n            _this2.setState({\n              active: true\n            });\n          }\n        },\n        onMouseLeave: function onMouseLeave() {\n          _this2.setState({\n            active: false\n          });\n        },\n        style: {\n          width: \"280px\",\n          position: \"absolute\",\n          right: 0,\n          top: 0,\n          fontSize: \"6px\",\n          lineHeight: \"10px\",\n          opacity: 0.8,\n          cursor: \"pointer\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, paragraphs.map(function (p, i) {\n        return React.createElement(\"p\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, p);\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, paragraphs.reduce(function (a, e) {\n        return a + e.split(\" \").length;\n      }, 0)), React.createElement(\"div\", {\n        download: \"tfw-ow-\".concat(mmddyyyy(), \".txt\"),\n        onClick: this.props.clearCommitted,\n        style: {\n          position: \"absolute\",\n          left: \"0\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"flex-start\",\n          fontSize: \"18px\",\n          right: \"50%\",\n          top: 0,\n          bottom: 0,\n          color: \"black\",\n          textDecoration: \"none\",\n          transition: \"opacity 300ms\",\n          backgroundColor: \"white\",\n          opacity: this.state.active ? 0.8 : 0,\n          pointerEvents: this.state.active ? \"auto\" : \"none\",\n          cursor: \"pointer\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Clear\")), React.createElement(\"a\", {\n        download: \"tfw-ow-\".concat(mmddyyyy(), \".txt\"),\n        href: downloadUrl,\n        style: {\n          position: \"absolute\",\n          left: \"50%\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"flex-start\",\n          fontSize: \"18px\",\n          right: \"0\",\n          top: 0,\n          bottom: 0,\n          color: \"black\",\n          textDecoration: \"none\",\n          transition: \"opacity 300ms\",\n          backgroundColor: \"white\",\n          opacity: this.state.active ? 0.8 : 0,\n          pointerEvents: this.state.active ? \"auto\" : \"none\",\n          cursor: \"pointer\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Download\")));\n    }\n  }]);\n\n  return BigPicture;\n}(Component);\n\nvar OneWay =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(OneWay, _Component2);\n\n  function OneWay() {\n    var _this3;\n\n    _classCallCheck(this, OneWay);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(OneWay).call(this));\n    var persistedStateString = typeof window !== \"undefined\" ? window.localStorage.getItem(\"oneway.state\") : \"{}\";\n    _this3.state = persistedStateString ? JSON.parse(persistedStateString) : {\n      committed: [],\n      inTheWorks: \"\"\n    };\n    return _this3;\n  }\n\n  _createClass(OneWay, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (typeof window !== \"undefined\") {\n        window.localStorage.setItem(\"oneway.state\", JSON.stringify(this.state));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          committed = _this$state.committed,\n          inTheWorks = _this$state.inTheWorks;\n      return React.createElement(Tomato, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          position: \"absolute\",\n          left: \"30px\",\n          right: \"30px\",\n          top: \"30px\",\n          bottom: \"30px\",\n          flexDirection: \"row\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(BigPicture, {\n        clearCommitted: function clearCommitted() {\n          _this4.setState({\n            committed: []\n          });\n        },\n        committed: committed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          width: \"80%\",\n          maxWidth: \"900px\",\n          height: \"80px\",\n          position: \"center\",\n          margin: \"0 auto\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        style: {\n          height: \"50px\",\n          width: \"100%\",\n          fontSize: \"16px\",\n          fontFamily: \"serif\",\n          border: \"1px solid lightgray\",\n          resize: \"none\",\n          padding: \"8px\",\n          outlineColor: \"lightgreen\"\n        },\n        type: \"text\",\n        value: inTheWorks,\n        onChange: function onChange(e) {\n          _this4.setState({\n            inTheWorks: e.target.value\n          });\n        },\n        onKeyDown: function onKeyDown(e) {\n          var committed = _this4.state.committed;\n\n          if (e.key === \"Enter\") {\n            e.preventDefault();\n\n            if (inTheWorks !== \"\") {\n              _this4.setState({\n                committed: [].concat(_toConsumableArray(committed), [inTheWorks]),\n                inTheWorks: \"\"\n              });\n            }\n          }\n\n          if (e.key === \"Tab\") {\n            e.preventDefault();\n\n            if (committed[committed.length - 1] !== \"<NEWPARAGRAPH>\") {\n              _this4.setState({\n                committed: [].concat(_toConsumableArray(committed), [\"<NEWPARAGRAPH>\"])\n              });\n            }\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OneWay;\n}(Component);\n\nexport default OneWay;","map":{"version":3,"sources":["/Users/adamwatters/tfw/src/pages/Onward.js"],"names":["React","Component","Tomato","mmddyyyy","BigPicture","state","committed","props","paragraphs","find","e","reduce","a","i","map","newParagraphIndex","index","arrayOfIndexes","console","log","length","slice","paragraphSubArray","filter","s","join","trim","blob","Blob","type","downloadUrl","URL","createObjectURL","setState","active","width","position","right","top","fontSize","lineHeight","opacity","cursor","p","split","clearCommitted","left","display","justifyContent","alignItems","bottom","color","textDecoration","transition","backgroundColor","pointerEvents","OneWay","persistedStateString","window","localStorage","getItem","JSON","parse","inTheWorks","setItem","stringify","flexDirection","maxWidth","height","margin","fontFamily","border","resize","padding","outlineColor","target","value","key","preventDefault"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Tomato from \"../components/Tomato\";\nimport { mmddyyyy } from \"../utilities/datetime.ts\";\n\nclass BigPicture extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n  render() {\n    const committed = this.props.committed || [];\n    // console.log(\"committed\", committed);\n    const paragraphs = committed.find(e => e === \"<NEWPARAGRAPH>\")\n      ? committed\n      : // initialize accumulator with a zero because the first paragraph should be sliced from 0\n        committed\n          .reduce((a, e, i) => (e === \"<NEWPARAGRAPH>\" ? [...a, i + 1] : a), [])\n          .map((newParagraphIndex, index, arrayOfIndexes) => {\n            console.log(\"****\");\n            console.log(\"newParagraphIndex\", newParagraphIndex);\n            console.log(\"index\", index);\n            console.log(\"arrayOfIndexes\", arrayOfIndexes);\n            console.log(\"****\");\n            if (newParagraphIndex === arrayOfIndexes.length - 1) {\n              return committed.slice(newParagraphIndex);\n            } else {\n              return committed.slice(\n                newParagraphIndex,\n                arrayOfIndexes[index + 1]\n              );\n            }\n          })\n          .map(paragraphSubArray => {\n            return paragraphSubArray\n              .filter(s => s !== \"<NEWPARAGRAPH>\")\n              .join(\" \")\n              .trim();\n          });\n    const blob = new Blob([paragraphs.join(`\\n`)], {\n      type: \"text/plain;charset=utf-8\"\n    });\n    // console.log(\"paragraphs\", paragraphs);\n    const downloadUrl = URL.createObjectURL(blob);\n    return (\n      <div\n        onMouseEnter={() => {\n          if (committed.length) {\n            this.setState({ active: true });\n          }\n        }}\n        onMouseLeave={() => {\n          this.setState({ active: false });\n        }}\n        style={{\n          width: `280px`,\n          position: \"absolute\",\n          right: 0,\n          top: 0,\n          fontSize: \"6px\",\n          lineHeight: \"10px\",\n          opacity: 0.8,\n          cursor: \"pointer\"\n        }}\n      >\n        {paragraphs.map((p, i) => (\n          <p key={i}>{p}</p>\n        ))}\n        <div>{paragraphs.reduce((a, e) => a + e.split(\" \").length, 0)}</div>\n        <div\n          download={`tfw-ow-${mmddyyyy()}.txt`}\n          onClick={this.props.clearCommitted}\n          style={{\n            position: \"absolute\",\n            left: \"0\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"flex-start\",\n            fontSize: \"18px\",\n            right: \"50%\",\n            top: 0,\n            bottom: 0,\n            color: \"black\",\n            textDecoration: \"none\",\n            transition: \"opacity 300ms\",\n            backgroundColor: \"white\",\n            opacity: this.state.active ? 0.8 : 0,\n            pointerEvents: this.state.active ? \"auto\" : \"none\",\n            cursor: \"pointer\"\n          }}\n        >\n          <span>{`Clear`}</span>\n        </div>\n        <a\n          download={`tfw-ow-${mmddyyyy()}.txt`}\n          href={downloadUrl}\n          style={{\n            position: \"absolute\",\n            left: \"50%\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"flex-start\",\n            fontSize: \"18px\",\n            right: \"0\",\n            top: 0,\n            bottom: 0,\n            color: \"black\",\n            textDecoration: \"none\",\n            transition: \"opacity 300ms\",\n            backgroundColor: \"white\",\n            opacity: this.state.active ? 0.8 : 0,\n            pointerEvents: this.state.active ? \"auto\" : \"none\",\n            cursor: \"pointer\"\n          }}\n        >\n          <span>{`Download`}</span>\n        </a>\n      </div>\n    );\n  }\n}\n\nclass OneWay extends Component {\n  constructor() {\n    super();\n    const persistedStateString =\n      typeof window !== `undefined`\n        ? window.localStorage.getItem(\"oneway.state\")\n        : \"{}\";\n    this.state = persistedStateString\n      ? JSON.parse(persistedStateString)\n      : {\n          committed: [],\n          inTheWorks: \"\"\n        };\n  }\n\n  componentDidUpdate() {\n    if (typeof window !== `undefined`) {\n      window.localStorage.setItem(\"oneway.state\", JSON.stringify(this.state));\n    }\n  }\n\n  render() {\n    const { committed, inTheWorks } = this.state;\n    return (\n      <Tomato>\n        <div\n          style={{\n            display: \"flex\",\n            position: \"absolute\",\n            left: \"30px\",\n            right: \"30px\",\n            top: \"30px\",\n            bottom: \"30px\",\n            flexDirection: \"row\",\n            alignItems: \"center\"\n          }}\n        >\n          <BigPicture\n            clearCommitted={() => {\n              this.setState({ committed: [] });\n            }}\n            committed={committed}\n          />\n          <div\n            style={{\n              width: `80%`,\n              maxWidth: \"900px\",\n              height: \"80px\",\n              position: \"center\",\n              margin: \"0 auto\"\n            }}\n          >\n            <textarea\n              style={{\n                height: \"50px\",\n                width: \"100%\",\n                fontSize: \"16px\",\n                fontFamily: \"serif\",\n                border: \"1px solid lightgray\",\n                resize: \"none\",\n                padding: \"8px\",\n                outlineColor: \"lightgreen\"\n              }}\n              type=\"text\"\n              value={inTheWorks}\n              onChange={e => {\n                this.setState({ inTheWorks: e.target.value });\n              }}\n              onKeyDown={e => {\n                const { committed } = this.state;\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  if (inTheWorks !== \"\") {\n                    this.setState({\n                      committed: [...committed, inTheWorks],\n                      inTheWorks: \"\"\n                    });\n                  }\n                }\n                if (e.key === \"Tab\") {\n                  e.preventDefault();\n                  if (committed[committed.length - 1] !== \"<NEWPARAGRAPH>\") {\n                    this.setState({\n                      committed: [...committed, \"<NEWPARAGRAPH>\"]\n                    });\n                  }\n                }\n              }}\n            />\n          </div>\n        </div>\n      </Tomato>\n    );\n  }\n}\n\nexport default OneWay;\n"]},"metadata":{},"sourceType":"module"}